<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>1 Introduction to the Tidyverse | DataCamp</title>
  <meta name="description" content="1 Introduction to the Tidyverse | DataCamp">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="1 Introduction to the Tidyverse | DataCamp" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Introduction to the Tidyverse | DataCamp" />
  
  
  

<meta name="author" content="Falnésio Ghander Soares Borges">


<meta name="date" content="2019-04-20">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="importing-data-with-r.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Anotações do Fal</a></li>
<li class="chapter" data-level="1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html"><i class="fa fa-check"></i><b>1</b> Introduction to the Tidyverse</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#data-wrangling"><i class="fa fa-check"></i><b>1.1</b> Data Wrangling</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#o-verbo-filtro-filter"><i class="fa fa-check"></i><b>1.1.1</b> O verbo filtro: filter()</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#o-verbo-arranjar-arrange"><i class="fa fa-check"></i><b>1.1.2</b> O verbo arranjar: arrange()</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#utilizando-mais-de-um-verbo"><i class="fa fa-check"></i><b>1.1.3</b> Utilizando mais de um verbo</a></li>
<li class="chapter" data-level="1.1.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#o-verbo-mutar-mutate"><i class="fa fa-check"></i><b>1.1.4</b> O verbo mutar: mutate()</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#data-visualization"><i class="fa fa-check"></i><b>1.2</b> Data Visualization</a><ul>
<li class="chapter" data-level="1.2.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#cor-e-tamanho"><i class="fa fa-check"></i><b>1.2.1</b> Cor e Tamanho</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#faceting-facetando"><i class="fa fa-check"></i><b>1.2.2</b> Faceting, facetando</a></li>
<li class="chapter" data-level="1.2.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#o-verbo-de-resumir-summarize-ou-summarise"><i class="fa fa-check"></i><b>1.2.3</b> O verbo de resumir: summarize() ou summarise()</a></li>
<li class="chapter" data-level="1.2.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#o-verbo-de-agrupar-group_by"><i class="fa fa-check"></i><b>1.2.4</b> O verbo de agrupar: group_by()</a></li>
<li class="chapter" data-level="1.2.5" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#visualizando-dados-resumidos"><i class="fa fa-check"></i><b>1.2.5</b> Visualizando dados resumidos</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#tipos-de-visualizacao"><i class="fa fa-check"></i><b>1.3</b> Tipos de visualização</a><ul>
<li class="chapter" data-level="1.3.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#grafico-de-linhas"><i class="fa fa-check"></i><b>1.3.1</b> Gráfico de linhas</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#grafico-de-barras"><i class="fa fa-check"></i><b>1.3.2</b> Gráfico de Barras</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#histograma"><i class="fa fa-check"></i><b>1.3.3</b> Histograma</a></li>
<li class="chapter" data-level="1.3.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#grafico-de-vela"><i class="fa fa-check"></i><b>1.3.4</b> Gráfico de vela</a></li>
<li class="chapter" data-level="1.3.5" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#colocando-um-titulo"><i class="fa fa-check"></i><b>1.3.5</b> Colocando um título</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="importing-data-with-r.html"><a href="importing-data-with-r.html"><i class="fa fa-check"></i><b>2</b> Importing Data with R</a><ul>
<li class="chapter" data-level="2.1" data-path="importing-data-with-r.html"><a href="importing-data-with-r.html#importing-data-from-flat-files-with-utils"><i class="fa fa-check"></i><b>2.1</b> Importing data from flat files with utils</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DataCamp</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-the-tidyverse" class="section level1">
<h1><span class="header-section-number">1</span> Introduction to the Tidyverse</h1>
<div class="figure">
<img src="imgs/tidyverse-model.png" />

</div>
<p>Estas anotações são do curso do DataCamp <a href="https://campus.datacamp.com/courses/introduction-to-the-tidyverse">Intrudução ao Tidyverse</a>, ministrado todo em inglês pelo David Robinson.</p>
<p>Para dicas em inglês sobre o tidyverse, veja o pdf abaixo. Os slides em inglês das aulas desse primeiro capítulo estão a seguir. <img src="https://datacamp-community-prod.s3.amazonaws.com/e63a8f6b-2aa3-4006-89e0-badc294b179c" alt="dicas do tidyverse" /></p>
<object data="https://datacamp-community-prod.s3.amazonaws.com/e63a8f6b-2aa3-4006-89e0-badc294b179c" type="application/pdf" width="100%" height="400">
<pre><code>&lt;embed src=&quot;https://datacamp-community-prod.s3.amazonaws.com/e63a8f6b-2aa3-4006-89e0-badc294b179c&quot;&gt;
    &lt;p&gt;This browser does not support PDFs. Please download the PDF to view it: &lt;a href=&quot;https://datacamp-community-prod.s3.amazonaws.com/e63a8f6b-2aa3-4006-89e0-badc294b179c&quot;&gt;Download PDF&lt;/a&gt;.&lt;/p&gt;
&lt;/embed&gt;</code></pre>
</object>
<div class="figure">
<embed src="pdfs/chapter1-DataCampIntroduction-to-the-Tidyverse-The-gapminder-dataset.pdf" style="width:100.0%" height="400" />
<p class="caption">Slides do primeiro capítulo em inglês</p>
</div>
<div id="data-wrangling" class="section level2">
<h2><span class="header-section-number">1.1</span> Data Wrangling</h2>
<p>Utilizaremos os dados da biblioteca do <a href="https://www.gapminder.org/">Gapminder</a>, um ótimo site com dados socio-econômicos mundias. Também estaremos utilizando a biblioteca <a href="https://dplyr.tidyverse.org/">dplyr</a>, que serve como uma fonte gramática para os textos progamáticos que estaremos escrevendo. dplyr fornecerar verbos que facilitarão a nossa escrita dos algorítmos a seguir.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)</code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<p>Ao rodar o código acima, nota-se que um aviso aparece dizendo que <a href="https://stackoverflow.com/questions/39137110/what-does-the-following-object-is-masked-from-packagexxx-mean">certas funções foram mascaradas</a>. Isso significa ao chamar os pacotes, existiam funções com o mesmo nome do que as que já foram carregdas, e que essas mais recentes serão utilizadas pois aparecem primeiro na ordem de chamada do R. Pode er mais sobre isso em português no <a href="https://falnesio.github.io/Time-Tito/coursera/r-programming/fal/semana-2.html">Scoping Rules - Symbol Binding</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Para verificar a ordem atual basta rodar a linha abaixo:</span>
<span class="kw">search</span>()</code></pre></div>
<pre><code>##  [1] &quot;.GlobalEnv&quot;        &quot;package:dplyr&quot;     &quot;package:gapminder&quot;
##  [4] &quot;package:stats&quot;     &quot;package:graphics&quot;  &quot;package:grDevices&quot;
##  [7] &quot;package:utils&quot;     &quot;package:datasets&quot;  &quot;package:methods&quot;  
## [10] &quot;Autoloads&quot;         &quot;package:base&quot;</code></pre>
<p>Abaixo uma visão exploratória dos dados que utilizaremos</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder</code></pre></div>
<pre><code>## # A tibble: 1,704 x 6
##    country     continent  year lifeExp      pop gdpPercap
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan Asia       1997    41.8 22227415      635.
## # … with 1,694 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(gapminder)</code></pre></div>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    1704 obs. of  6 variables:
##  $ country  : Factor w/ 142 levels &quot;Afghanistan&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ continent: Factor w/ 5 levels &quot;Africa&quot;,&quot;Americas&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
##  $ year     : int  1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
##  $ lifeExp  : num  28.8 30.3 32 34 36.1 ...
##  $ pop      : int  8425333 9240934 10267083 11537966 13079460 14880372 12881816 13867957 16317921 22227415 ...
##  $ gdpPercap: num  779 821 853 836 740 ...</code></pre>
<div id="o-verbo-filtro-filter" class="section level3">
<h3><span class="header-section-number">1.1.1</span> O verbo filtro: filter()</h3>
<p>Utilizamos <code>filter()</code> quando queremos obter um subconjunto dos dados. Quando formos utilizar um verbo, sempre utilizamos um cano (<strong>pipe</strong>) <code>%&gt;%</code>. Esse cano irá puxar o dado que vem antes e passar ele pelo verbo filtro.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Abaixo estamos filtrando pelo ano 2007</span>
gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>)</code></pre></div>
<pre><code>## # A tibble: 142 x 6
##    country     continent  year lifeExp       pop gdpPercap
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       2007    43.8  31889923      975.
##  2 Albania     Europe     2007    76.4   3600523     5937.
##  3 Algeria     Africa     2007    72.3  33333216     6223.
##  4 Angola      Africa     2007    42.7  12420476     4797.
##  5 Argentina   Americas   2007    75.3  40301927    12779.
##  6 Australia   Oceania    2007    81.2  20434176    34435.
##  7 Austria     Europe     2007    79.8   8199783    36126.
##  8 Bahrain     Asia       2007    75.6    708573    29796.
##  9 Bangladesh  Asia       2007    64.1 150448339     1391.
## 10 Belgium     Europe     2007    79.4  10392226    33693.
## # … with 132 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># e agora por país</span>
gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;Brazil&quot;</span>)</code></pre></div>
<pre><code>## # A tibble: 12 x 6
##    country continent  year lifeExp       pop gdpPercap
##    &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;
##  1 Brazil  Americas   1952    50.9  56602560     2109.
##  2 Brazil  Americas   1957    53.3  65551171     2487.
##  3 Brazil  Americas   1962    55.7  76039390     3337.
##  4 Brazil  Americas   1967    57.6  88049823     3430.
##  5 Brazil  Americas   1972    59.5 100840058     4986.
##  6 Brazil  Americas   1977    61.5 114313951     6660.
##  7 Brazil  Americas   1982    63.3 128962939     7031.
##  8 Brazil  Americas   1987    65.2 142938076     7807.
##  9 Brazil  Americas   1992    67.1 155975974     6950.
## 10 Brazil  Americas   1997    69.4 168546719     7958.
## 11 Brazil  Americas   2002    71.0 179914212     8131.
## 12 Brazil  Americas   2007    72.4 190010647     9066.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># podemos fazer isso para múltiplos prâmetros</span>
gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>, country <span class="op">==</span><span class="st"> &quot;Brazil&quot;</span>)</code></pre></div>
<pre><code>## # A tibble: 1 x 6
##   country continent  year lifeExp       pop gdpPercap
##   &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;
## 1 Brazil  Americas   2007    72.4 190010647     9066.</code></pre>
</div>
<div id="o-verbo-arranjar-arrange" class="section level3">
<h3><span class="header-section-number">1.1.2</span> O verbo arranjar: arrange()</h3>
<p>O verbo <code>arrange</code> reordena as observações de uma base de dados de forma ascendente ou descendente (default) com base em um dos seus parâmetros.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Ascendente</span>
gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(gdpPercap)</code></pre></div>
<pre><code>## # A tibble: 1,704 x 6
##    country          continent  year lifeExp      pop gdpPercap
##    &lt;fct&gt;            &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Congo, Dem. Rep. Africa     2002    45.0 55379852      241.
##  2 Congo, Dem. Rep. Africa     2007    46.5 64606759      278.
##  3 Lesotho          Africa     1952    42.1   748747      299.
##  4 Guinea-Bissau    Africa     1952    32.5   580653      300.
##  5 Congo, Dem. Rep. Africa     1997    42.6 47798986      312.
##  6 Eritrea          Africa     1952    35.9  1438760      329.
##  7 Myanmar          Asia       1952    36.3 20092996      331 
##  8 Lesotho          Africa     1957    45.0   813338      336.
##  9 Burundi          Africa     1952    39.0  2445618      339.
## 10 Eritrea          Africa     1957    38.0  1542611      344.
## # … with 1,694 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Descendente</span>
gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(gdpPercap))</code></pre></div>
<pre><code>## # A tibble: 1,704 x 6
##    country   continent  year lifeExp     pop gdpPercap
##    &lt;fct&gt;     &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;     &lt;dbl&gt;
##  1 Kuwait    Asia       1957    58.0  212846   113523.
##  2 Kuwait    Asia       1972    67.7  841934   109348.
##  3 Kuwait    Asia       1952    55.6  160000   108382.
##  4 Kuwait    Asia       1962    60.5  358266    95458.
##  5 Kuwait    Asia       1967    64.6  575003    80895.
##  6 Kuwait    Asia       1977    69.3 1140357    59265.
##  7 Norway    Europe     2007    80.2 4627926    49357.
##  8 Kuwait    Asia       2007    77.6 2505559    47307.
##  9 Singapore Asia       2007    80.0 4553009    47143.
## 10 Norway    Europe     2002    79.0 4535591    44684.
## # … with 1,694 more rows</code></pre>
</div>
<div id="utilizando-mais-de-um-verbo" class="section level3">
<h3><span class="header-section-number">1.1.3</span> Utilizando mais de um verbo</h3>
<p>Aqui utilizaremos uma série de canalização, passando os dados pelo primeiro filtramos os dados que queremos, depois, passando pelo segundo encanamento, ordenamos os dados de acordo com o parâmetro de nossa escolha.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(gdpPercap))</code></pre></div>
<pre><code>## # A tibble: 142 x 6
##    country          continent  year lifeExp       pop gdpPercap
##    &lt;fct&gt;            &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;
##  1 Norway           Europe     2007    80.2   4627926    49357.
##  2 Kuwait           Asia       2007    77.6   2505559    47307.
##  3 Singapore        Asia       2007    80.0   4553009    47143.
##  4 United States    Americas   2007    78.2 301139947    42952.
##  5 Ireland          Europe     2007    78.9   4109086    40676.
##  6 Hong Kong, China Asia       2007    82.2   6980412    39725.
##  7 Switzerland      Europe     2007    81.7   7554661    37506.
##  8 Netherlands      Europe     2007    79.8  16570613    36798.
##  9 Canada           Americas   2007    80.7  33390141    36319.
## 10 Iceland          Europe     2007    81.8    301931    36181.
## # … with 132 more rows</code></pre>
</div>
<div id="o-verbo-mutar-mutate" class="section level3">
<h3><span class="header-section-number">1.1.4</span> O verbo mutar: mutate()</h3>
<p>Supomos que queiro alterar ou adicionar uma variável/parâmetro do banco de dados, para isso utilizaremos <code>mutate()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># População será alterado para população / 1000000</span>
gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pop =</span> pop <span class="op">/</span><span class="st"> </span><span class="dv">1000000</span>)</code></pre></div>
<pre><code>## # A tibble: 1,704 x 6
##    country     continent  year lifeExp   pop gdpPercap
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8.43      779.
##  2 Afghanistan Asia       1957    30.3  9.24      821.
##  3 Afghanistan Asia       1962    32.0 10.3       853.
##  4 Afghanistan Asia       1967    34.0 11.5       836.
##  5 Afghanistan Asia       1972    36.1 13.1       740.
##  6 Afghanistan Asia       1977    38.4 14.9       786.
##  7 Afghanistan Asia       1982    39.9 12.9       978.
##  8 Afghanistan Asia       1987    40.8 13.9       852.
##  9 Afghanistan Asia       1992    41.7 16.3       649.
## 10 Afghanistan Asia       1997    41.8 22.2       635.
## # … with 1,694 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Abaixo criamos a variável gdp (a nova variável não pode conter espaços no nome)</span>
gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdp =</span> gdpPercap <span class="op">*</span><span class="st"> </span>pop)</code></pre></div>
<pre><code>## # A tibble: 1,704 x 7
##    country     continent  year lifeExp      pop gdpPercap          gdp
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;        &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.  6567086330.
##  2 Afghanistan Asia       1957    30.3  9240934      821.  7585448670.
##  3 Afghanistan Asia       1962    32.0 10267083      853.  8758855797.
##  4 Afghanistan Asia       1967    34.0 11537966      836.  9648014150.
##  5 Afghanistan Asia       1972    36.1 13079460      740.  9678553274.
##  6 Afghanistan Asia       1977    38.4 14880372      786. 11697659231.
##  7 Afghanistan Asia       1982    39.9 12881816      978. 12598563401.
##  8 Afghanistan Asia       1987    40.8 13867957      852. 11820990309.
##  9 Afghanistan Asia       1992    41.7 16317921      649. 10595901589.
## 10 Afghanistan Asia       1997    41.8 22227415      635. 14121995875.
## # … with 1,694 more rows</code></pre>
</div>
</div>
<div id="data-visualization" class="section level2">
<h2><span class="header-section-number">1.2</span> Data Visualization</h2>
<p>Utilizaremos o pacote <code>ggplot2</code> em conjunto com <code>dplyr</code> para gerar gráficos. Para gerar as visualizações das informações que achamos interessante, primeiro precisamos de aplicar a nossa manipulação dos dados a uma variável, como a seguir:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder_<span class="dv">2007</span> &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>)

gapminder_<span class="dv">2007</span></code></pre></div>
<pre><code>## # A tibble: 142 x 6
##    country     continent  year lifeExp       pop gdpPercap
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       2007    43.8  31889923      975.
##  2 Albania     Europe     2007    76.4   3600523     5937.
##  3 Algeria     Africa     2007    72.3  33333216     6223.
##  4 Angola      Africa     2007    42.7  12420476     4797.
##  5 Argentina   Americas   2007    75.3  40301927    12779.
##  6 Australia   Oceania    2007    81.2  20434176    34435.
##  7 Austria     Europe     2007    79.8   8199783    36126.
##  8 Bahrain     Asia       2007    75.6    708573    29796.
##  9 Bangladesh  Asia       2007    64.1 150448339     1391.
## 10 Belgium     Europe     2007    79.4  10392226    33693.
## # … with 132 more rows</code></pre>
<p>Para criar as nossas visualizações com <code>ggplot2</code>, precisamos primeiro puxar a sua biblioteca:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)</code></pre></div>
<p>Agora criaremos um gráfico de dispersão com os dados de expectativa de vida e PIB per <em>capita</em>, para fazer uma analise exploratória de correlação entre esses dois parâmetros.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># O primeiro argumento é a base de dados, seguido pelo aes que é a base estética do gráfico, onde alocamos quais dados queremos e em quais dimensões serão aplicados. </span>
<span class="co"># Depois do &quot;+&quot; chamamos o tipo de gráfico que queremos, isso adiciona uma camada ao gráfico com determinada visualização. O &quot;geom&quot; significa que estamos adicionando uma camada geométrica ao gráfico, o ponto indica que cada observação é representado por um ponto.</span>
<span class="kw">ggplot</span>(gapminder_<span class="dv">2007</span>, <span class="kw">aes</span>(<span class="dt">x =</span> gdpPercap, <span class="dt">y =</span> lifeExp)) <span class="op">+</span><span class="st">  </span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Algúns dados não são bem representados em gráficos em sua forma bruta, tendo muitas das observações, por exemplo, encolhidas na esquerda como no gráfico acima e no exemplo abaixo. No gráfico abaixo, é difícil de tirar conclusões sobre a relação entre PIB per <em>capita</em> e população.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder_<span class="dv">2007</span>, <span class="kw">aes</span>(<span class="dt">x =</span> pop, <span class="dt">y =</span> gdpPercap)) <span class="op">+</span><span class="st">  </span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-11-1.png" width="672" /> Isso ocorre devido as diferenças nas ordens de grandezas dos dados. Isso pode ser corrigido com uma escala logarítmica onde as distâncias entre as observações se mantem constante para uma mesma variação da proporção entre eles. Isso pode ser feito facilmente colocando mais uma camada ao gráfico.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Para o primeiro gráfico temos</span>
<span class="kw">ggplot</span>(gapminder_<span class="dv">2007</span>, <span class="kw">aes</span>(<span class="dt">x =</span> gdpPercap, <span class="dt">y =</span> lifeExp)) <span class="op">+</span><span class="st">  </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_log10</span>()</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Para o segundo temos</span>
<span class="kw">ggplot</span>(gapminder_<span class="dv">2007</span>, <span class="kw">aes</span>(<span class="dt">x =</span> pop, <span class="dt">y =</span> lifeExp)) <span class="op">+</span><span class="st">  </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_log10</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_log10</span>()</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-12-2.png" width="672" /> Observamos claramente então que não existe correlação entre a população e expectativa de vida, porém existe entre isso e Pib per <em>capita</em>.</p>
<div id="cor-e-tamanho" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Cor e Tamanho</h3>
<p>Um bom jeito de explicitar categorias em gráficos é aplicando cores. Faremos isso para demarcar os continente relativos a cada observação nos dados abaixo. A legenda é criada automaticamente.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder_<span class="dv">2007</span>, <span class="kw">aes</span>(<span class="dt">x =</span> gdpPercap, <span class="dt">y =</span> lifeExp, <span class="dt">color =</span> continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_log10</span>()</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-13-1.png" width="672" /> Podemos melhorar a visualização colocando mais informações de forma sutil. Faremos isso adicionando informação sobre o tamanho da população ao gráfico sendo representado pelo tamanho do ponto a seguir. Colocamos o argumento para o tamanho numa linha separada para deixar o código mais fácil de ser lido por um humano.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder_<span class="dv">2007</span>, <span class="kw">aes</span>(<span class="dt">x =</span> gdpPercap, <span class="dt">y =</span> lifeExp, <span class="dt">color =</span> continent, 
                           <span class="dt">size =</span> pop)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_log10</span>()</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Vemos que apesar de não existir correlação entre as duas variáveis o gráfico nos permite encontrar que países africanos se agrupam mais numa região de baixa expectativa de vida e países europeus em uma região com maior expectativa de vida. Isso seria uma informação muito útil , junto à falta de correlação, se não tivessemos obtido tais informações anteriormente.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder_<span class="dv">2007</span>, <span class="kw">aes</span>(<span class="dt">x =</span> pop, <span class="dt">y =</span> lifeExp, <span class="dt">color =</span> continent)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">    </span><span class="kw">scale_x_log10</span>()</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
</div>
<div id="faceting-facetando" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Faceting, facetando</h3>
<p>É possível dividir um gráfico em várias faces de acordo com um parâmetro, gerando subgráficos de um gráfico originário. Fazemos isso adicionando mais uma camada ao gráfico. Geralmente em R,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder_<span class="dv">2007</span>, <span class="kw">aes</span>(<span class="dt">x =</span> gdpPercap, <span class="dt">y =</span> lifeExp, <span class="dt">color =</span> continent, 
                           <span class="dt">size =</span> pop)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_log10</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>continent)</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-16-1.png" width="672" /> Podemos expandir a nossa análise e verificar as mesmas informações para todos os anos.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder, <span class="kw">aes</span>(<span class="dt">x =</span> gdpPercap, <span class="dt">y =</span> lifeExp, <span class="dt">color =</span> continent, 
                           <span class="dt">size =</span> pop)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_log10</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>year)</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-17-1.png" width="672" /> Podemos observar uma leve tendência para cima e para a direita, representando um Pib per <em>capita</em> e uma expectativa de vida maior ao longo do tempo numa escala mundial.</p>
</div>
<div id="o-verbo-de-resumir-summarize-ou-summarise" class="section level3">
<h3><span class="header-section-number">1.2.3</span> O verbo de resumir: summarize() ou summarise()</h3>
<p>Tal verbo transforma um parâmetro em um ponto de dado, resumindo as informações de todos os dados das observações abaixo, por exemplo, numa média.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mediaLifeExp =</span> <span class="kw">mean</span>(lifeExp))</code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   mediaLifeExp
##          &lt;dbl&gt;
## 1         59.5</code></pre>
<p>Podemos fazer uma análise para um ano em particular, que deve fazer mais sentido que olhar a média de todos os países e todos os anos. Podemos resumir mais de uma observação de uma só vez também.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mediaLifeExp =</span> <span class="kw">mean</span>(lifeExp), <span class="dt">totalPop =</span> <span class="kw">sum</span>(<span class="kw">as.numeric</span>(pop)))</code></pre></div>
<pre><code>## # A tibble: 1 x 2
##   mediaLifeExp   totalPop
##          &lt;dbl&gt;      &lt;dbl&gt;
## 1         67.0 6251013179</code></pre>
</div>
<div id="o-verbo-de-agrupar-group_by" class="section level3">
<h3><span class="header-section-number">1.2.4</span> O verbo de agrupar: group_by()</h3>
<p>E se quisermos ver o resumo de vários grupos de dados como, por exemplo, para cada ano? Podemos utilizar o verbo <code>grou_by()</code> para isso. É o mesmo que filter, porém ao invés de puxar os dados e criar um agrupamento, esse cria vários baseados num parâmetro.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mediaLifeExp =</span> <span class="kw">mean</span>(lifeExp), <span class="dt">totalpop =</span> <span class="kw">sum</span>(<span class="kw">as.numeric</span>(pop)))</code></pre></div>
<pre><code>## # A tibble: 12 x 3
##     year mediaLifeExp   totalpop
##    &lt;int&gt;        &lt;dbl&gt;      &lt;dbl&gt;
##  1  1952         49.1 2406957150
##  2  1957         51.5 2664404580
##  3  1962         53.6 2899782974
##  4  1967         55.7 3217478384
##  5  1972         57.6 3576977158
##  6  1977         59.6 3930045807
##  7  1982         61.5 4289436840
##  8  1987         63.2 4691477418
##  9  1992         64.2 5110710260
## 10  1997         65.0 5515204472
## 11  2002         65.7 5886977579
## 12  2007         67.0 6251013179</code></pre>
<p>Podemos utilizar ambos <code>filtro</code> e <code>group_by</code> para selecionar uma característica em particular, dividir os dados com essa característica em grupos e resumir cada um.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">por_continente_<span class="dv">2007</span>&lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mediaLifeExp =</span> <span class="kw">mean</span>(lifeExp), <span class="dt">totalPop =</span> <span class="kw">sum</span>(<span class="kw">as.numeric</span>(pop)))
por_continente_<span class="dv">2007</span></code></pre></div>
<pre><code>## # A tibble: 5 x 3
##   continent mediaLifeExp   totalPop
##   &lt;fct&gt;            &lt;dbl&gt;      &lt;dbl&gt;
## 1 Africa            54.8  929539692
## 2 Americas          73.6  898871184
## 3 Asia              70.7 3811953827
## 4 Europe            77.6  586098529
## 5 Oceania           80.7   24549947</code></pre>
<p>Tendo essa tabela, talvez esteja curioso sobre como fazer uma para cada ano? Podemos fazer isso escolhendo agrupar por ano e continente. Ou seja, primeiro as observações são agrupadas pelo primeiro parâmetro e dentro desse agrupamento, são agrupados pelo segundo.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(year, continent) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mediaLifeExp =</span> <span class="kw">mean</span>(lifeExp), <span class="dt">totalpop =</span> <span class="kw">sum</span>(<span class="kw">as.numeric</span>(pop)))</code></pre></div>
<pre><code>## # A tibble: 60 x 4
## # Groups:   year [12]
##     year continent mediaLifeExp   totalpop
##    &lt;int&gt; &lt;fct&gt;            &lt;dbl&gt;      &lt;dbl&gt;
##  1  1952 Africa            39.1  237640501
##  2  1952 Americas          53.3  345152446
##  3  1952 Asia              46.3 1395357351
##  4  1952 Europe            64.4  418120846
##  5  1952 Oceania           69.3   10686006
##  6  1957 Africa            41.3  264837738
##  7  1957 Americas          56.0  386953916
##  8  1957 Asia              49.3 1562780599
##  9  1957 Europe            66.7  437890351
## 10  1957 Oceania           70.3   11941976
## # … with 50 more rows</code></pre>
</div>
<div id="visualizando-dados-resumidos" class="section level3">
<h3><span class="header-section-number">1.2.5</span> Visualizando dados resumidos</h3>
<p>Os três passos ggplot: 1. Os dados 1. A estética (x,y) 1. O tipo de gráfico</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">por_ano &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mediaLifeExp =</span> <span class="kw">mean</span>(lifeExp), <span class="dt">totalPop =</span> <span class="kw">sum</span>(<span class="kw">as.numeric</span>(pop)))
<span class="kw">ggplot</span>(por_ano, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> totalPop)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-23-1.png" width="672" /> O gráfico não representa muito bem a realiade dado não mostrar direito onde iniciou. Para revolver isso podemos adicionaro espaço abaixo dos dados. Boas práticas dizem que as informações num gráfico devem preencher 1/3 do espaço total.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(por_ano, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> totalPop)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()<span class="op">+</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">y =</span> <span class="dv">0</span>)</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-24-1.png" width="672" /> Podemos ver as tendências de todos os continentes também.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">por_ano_continente &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(year, continent) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mediaLifeExp =</span> <span class="kw">mean</span>(lifeExp), <span class="dt">totalPop =</span> <span class="kw">sum</span>(<span class="kw">as.numeric</span>(pop)))
<span class="kw">ggplot</span>(por_ano_continente, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> totalPop, <span class="dt">color =</span> continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">y =</span> <span class="dv">0</span>)</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
</div>
</div>
<div id="tipos-de-visualizacao" class="section level2">
<h2><span class="header-section-number">1.3</span> Tipos de visualização</h2>
<p>Agora vamos expandir nos tipos de visualização que temos, que são bons para comparar estatísticas entre categorias. Faremos regressões, gráficos de barra, histogramas, etc.</p>
<div id="grafico-de-linhas" class="section level3">
<h3><span class="header-section-number">1.3.1</span> Gráfico de linhas</h3>
<p>Para fazer um <strong>gráfico de linha</strong> é só mudar <code>geom_point</code> para <code>geom_line</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">por_ano_continente &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(year, continent) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mediaLifeExp =</span> <span class="kw">mean</span>(lifeExp), <span class="dt">totalPop =</span> <span class="kw">sum</span>(<span class="kw">as.numeric</span>(pop)))
<span class="kw">ggplot</span>(por_ano_continente, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> totalPop, <span class="dt">color =</span> continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
</div>
<div id="grafico-de-barras" class="section level3">
<h3><span class="header-section-number">1.3.2</span> Gráfico de Barras</h3>
<p>Vamos ver como criar um gráfico de barras simples</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># por_ano</span>
<span class="kw">ggplot</span>(por_continente_<span class="dv">2007</span>, <span class="kw">aes</span>(<span class="dt">x =</span> continent, <span class="dt">y =</span> totalPop, <span class="dt">color =</span> continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>()</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-27-1.png" width="672" /> Que tal uma visualização que mostra a variação ao longo de vários anos e não apenas 2007</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">por_ano_continente &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(year, continent) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mediaLifeExp =</span> <span class="kw">mean</span>(lifeExp), <span class="dt">totalPop =</span> <span class="kw">sum</span>(<span class="kw">as.numeric</span>(pop)))
<span class="kw">ggplot</span>(por_ano_continente, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> totalPop, <span class="dt">color =</span> continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>()</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
</div>
<div id="histograma" class="section level3">
<h3><span class="header-section-number">1.3.3</span> Histograma</h3>
<p>Para os histograms, podemos deixar as bandas serem escolhidas pelo R, ou escolher o tamanho manualmente dentro do <code>geom_histogram()</code> com, por exemplo, <code>geom_histogram(binwidth = 5)</code>. Nesse caso o tamanho das bandas são a quantidade de anos dentro de cada barra.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(por_ano_continente, <span class="kw">aes</span>(<span class="dt">x =</span> mediaLifeExp)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">5</span>)</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-29-1.png" width="672" /> Podemos também ter um olhar mais detalhado ao extratificado por continente.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(por_ano_continente, <span class="kw">aes</span>(<span class="dt">x =</span> mediaLifeExp, <span class="dt">color =</span> continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>()</code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-30-1.png" width="672" /> Quando os dados estão muito concentrados na esquerda, como abaixo, podemos utilizar uma escala logarítmica.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder_<span class="dv">1952</span> &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">1952</span>)
<span class="kw">ggplot</span>(gapminder_<span class="dv">1952</span>, <span class="kw">aes</span>(<span class="dt">x =</span> pop)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>() </code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-31-1.png" width="672" /> Como podemos ver, isso resolve o problema</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gapminder_<span class="dv">1952</span> &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">1952</span>)
<span class="kw">ggplot</span>(gapminder_<span class="dv">1952</span>, <span class="kw">aes</span>(<span class="dt">x =</span> pop)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_log10</span>()</code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
</div>
<div id="grafico-de-vela" class="section level3">
<h3><span class="header-section-number">1.3.4</span> Gráfico de vela</h3>
<p>Mostra as distribuições: máximos, mínimos, mediana, os pontos de outliers e o 25 percentile e 75 percentile (ou seja, metade da distribuição se localiza nessa caixa).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder_<span class="dv">2007</span>, <span class="kw">aes</span>(<span class="dt">x =</span> continent, <span class="dt">y =</span> lifeExp)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>()</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
</div>
<div id="colocando-um-titulo" class="section level3">
<h3><span class="header-section-number">1.3.5</span> Colocando um título</h3>
<p>Adiciona-se uma camada com <code>ggtitle(&quot;seu título&quot;)</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder_<span class="dv">2007</span>, <span class="kw">aes</span>(<span class="dt">x =</span> continent, <span class="dt">y =</span> lifeExp)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;seu título&quot;</span>)</code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="importing-data-with-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
